# Axis Bank UPI Get Token API

This endpoint is used to fetch a token into the UPI Payment Service Provider Switch.

## API Details

**Endpoint:** `GET /api/axis/upi/get-token`

**Description:** Fetch token from Axis Bank UPI service based on customer ID, type, and challenge parameters.

## Request Parameters

### Headers

| Header | Type | Required | Description |
|--------|------|----------|-------------|
| X-IBM-Client-Id | String | Yes | Client ID from API keys shared by Axis Bank |
| X-IBM-Client-Secret | String | Yes | Client Secret from API keys shared by Axis Bank |
| X-AXIS-TEST-ID | String | Yes | Test ID to simulate different response conditions (1=Success, 2=No records found, 90=Invalid Input, 91=Backend Failure) |
| X-AXIS-serviceRequestId | String | Yes | Service request ID configured for the source system |
| X-AXIS-serviceRequestVersion | String | Yes | Service request version for the source system |
| X-AXIS-channelId | String | Yes | Channel ID configured for the source system |
| X-Axis-requestUUID | String | Yes | Reference identifier for uniquely identifying each request |
| Accept | String | No | Response content type (default: application/json) |

### Query Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| customerId | String | Yes | Unique identifier of the customer |
| type | String | Yes | Type of token (INITIAL or ROTATE) |
| challenge | String | Yes | Generated by App with format: DeviceID\|AppID\|Registered mobile number\|Challenge |

## Response

### Success Response (Status 200)

```json
{
  "status": "success",
  "message": "Token fetched successfully from Axis Bank",
  "data": {
    "GetTokenResponse": {
      "SubHeader": {
        "requestUUID": "97f6b07e-b82d-4fed-9c57-80088ba23e30",
        "serviceRequestId": "NB.GEN.PDT.ELIG",
        "serviceRequestVersion": "1.0",
        "channelId": "TEST"
      },
      "GetTokenResponseBody": {
        "code": "00",
        "result": "success",
        "data": "dvsdv454/32523s5 565ge7768/678fgbcvbvbdb="
      }
    }
  }
}
```

### Error Response (Status 400/500)

```json
{
  "status": "error",
  "message": "<Error message>",
  "errors": [...],
  "statusCode": 400/500
}
```

## Response Codes

| X-AXIS-TEST-ID | Description |
|----------------|-------------|
| 1 | Success |
| 2 | No records found |
| 90 | Invalid input |
| 91 | Backend failure |

## Example Usage

### Node.js Example

```javascript
const axios = require('axios');

const options = {
  method: 'GET',
  url: 'http://your-api-endpoint/api/axis/upi/get-token',
  params: {
    customerId: 'customer123',
    type: 'INITIAL',
    challenge: 'deviceId|appId|mobileNumber|randomChallenge'
  },
  headers: {
    'X-IBM-Client-Id': 'your-client-id',
    'X-IBM-Client-Secret': 'your-client-secret',
    'X-AXIS-TEST-ID': '1',
    'X-AXIS-serviceRequestId': 'NB.GEN.PDT.ELIG',
    'X-AXIS-serviceRequestVersion': '1.0',
    'X-AXIS-channelId': 'TEST',
    'X-Axis-requestUUID': 'unique-request-uuid',
    'Accept': 'application/json'
  }
};

axios(options)
  .then(response => {
    console.log(response.data);
  })
  .catch(error => {
    console.error(error);
  });
```

## Schema

```json
{
  "properties": {
    "GetTokenResponse": {
      "properties": {
        "SubHeader": {
          "properties": {
            "requestUUID": {
              "type": "string",
              "description": "Unique alphanumeric ID (without special characters) from the source system",
              "example": "97f6b07e-b82d-4fed-9c57-80088ba23e30"
            },
            "serviceRequestId": {
              "type": "string",
              "description": "Service request ID configured at API Connect for the source system.",
              "example": "NB.GEN.PDT.ELIG"
            },
            "serviceRequestVersion": {
              "type": "string",
              "description": "Service request version configured at API Connect for the source system.",
              "example": "1.0"
            },
            "channelId": {
              "type": "string",
              "description": "Channel ID configured at API Connect for the source system.",
              "example": "TEST"
            }
          },
          "additionalProperties": false,
          "description": "SubHeader is the common identifier and audit parameter used for all the services built in API Connect."
        },
        "GetTokenResponseBody": {
          "properties": {
            "code": {
              "type": "string",
              "description": "Response Code",
              "example": "00"
            },
            "result": {
              "type": "string",
              "description": "Response Result",
              "example": "success"
            },
            "data": {
              "type": "string",
              "description": "Response data which is a base64 encoded token string",
              "example": "dvsdv454/32523s5 565ge7768/678fgbcvbvbdb="
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
``` 